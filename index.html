<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <title>Title!</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <link rel="stylesheet" href="css/reveal.css">
  <link rel="stylesheet" href="css/highlight-github-gist.css">
  <link rel="stylesheet" href="css/theme.css" id="theme">
  <link rel="stylesheet" href="css/style.css">
</head>

<body>
  <!-- Resolution: 1280 x 800 -->

  <div class="reveal">


    <!-- Begin SGB slides: -->

    <div class="slides">
      <section class="block-text" data-background="../city-directory-meetup/images/119.56783783.6ba50f00-5ce4-0134-32e3-00505686a51c.jpeg">
        <div>
          <span class="block"><strong>Field labeling</strong></span>
        </div>
        <div>
          <span class="block">Stephen Balogh, New York University</span>
        </div>
        <span class="caption">
						Extracting labeled fields from directory entries
					</span>
      </section>

      <section data-background="#000">
        <ul>
          <li class="fragment">Be able to recognize different types of data within an entry</li>
          <li class="fragment">Extract structured knowledge about each individual...</li>
          </ol>
          <span class="caption">
              Motivation
            </span>
      </section>

      <section data-background="#000">
        <img class="stretch" src="../city-directory-meetup/images/label-extraction/animation-0.jpg" />
        <span class="caption">
						A sample directory sheet...
					</span>
      </section>

      <section data-background="#000">
        <img class="stretch" src="../city-directory-meetup/images/label-extraction/animation-1.jpg">
        <span class="caption">
            Find names of <b>individuals</b> and <b>companies</b>
          </span>
      </section>

      <section data-background="#000">
        <img class="stretch" src="../city-directory-meetup/images/label-extraction/animation-2.jpg">
        <span class="caption">
            Find <b>occupations</b>
          </span>
      </section>

      <section data-background="#000">
        <img class="stretch" src="../city-directory-meetup/images/label-extraction/animation-3.jpg">
        <span class="caption">
            Find <b>predicates</b> of space
          </span>
      </section>

      <section data-background="#000">
        <img class="stretch" src="../city-directory-meetup/images/label-extraction/animation-4.jpg">
        <span class="caption">
            Find <b>addresses</b> and <b>locations</b>
          </span>
      </section>

      <section>
        <ol>

          <li><b>name</b></li> => <em>"George Binkenburg"</em>

          <div class="fragment">
            <li><b>occupation</b></li> => <em>"pianomkr."</em>
          </div>
          <div class="fragment">
            <li><b>location predicate</b></li> => <em>"h."</em> (home)
          </div>
          <div class="fragment">
            <li><b>address</b></li> => <em>"924 Third av."</em>
          </div>
        </ol>
        <span class="caption">
            Four main types of labels
          </span>
      </section>

      <section>
        <b>Can we do this using regular expressions?</b>
        <span class="caption">
            First intuition: Regular expressions
          </span>
      </section>

      <section>
        <ol>
          <b style="background-color:red">Not really!</b>
          <li>OCR transcriptions are never perfect
            <ul>
              <li>There are mistranscriptions in the parsed text</li>
              <li>This makes it very difficult to consistently <b>tokenize</b> the entries</li>
            </ul>
          </li>
        </ol>
        <span class="caption">
            First intuition: Regular expressions
          </span>
      </section>

      <section>
        <ul>
          <li>For instance, consider the (correctly) transcribed entry:<br><b style="color:#e15718">Binkenburg George, pianomkr. h. 924 Third av.</b>
            <ul>
              <li>From this, it seems reasonable to split the entry just based on "," and "." characters, and we'd be pretty close!</li>
            </ul>
          </li>
          <li class="fragment"><b style="color:#e15718">Binkenburg George<b style="background-color:yellow">,</b> pianomkr<b style="background-color:yellow">.</b> h<b style="background-color:yellow">.</b> 924 Third av<b style="background-color:yellow">.</b></b>
        </ol>
        <span class="caption">
            First intuition: Regular expressions
          </span>
      </section>

      <section>
        <ul>
          <li>Unfortunately, we rarely see such clean parses!
          <li class="fragment">Something like this is much more likely:<br><b style="color:#e15718">BInkenbu rg Geor ge pianomkr. h 924 Th1rd av</b>
        </ol>
        <span class="caption">
            First intuition: Regular expressions
          </span>
      </section>

      <section>
        <ul>
          <li>And not only can we not trust the transcriptions 100%...</li>
          <li>We also can't predict the amount of elements in an entry without inspecting first!</li>
          <li class="fragment"><b style="color:#e15718">Burtnett Daniel, pres. cit. f. ins. co. 67 Wall & 64 Bowery, h. 14 Perry</b>
            <li class="fragment"><b style="color:#e15718">Burt Edwin C. boots & shoes, 43 Broadway, h. 327 Henry, Brooklyn</b>
        </ol>
        <span class="caption">
            First intuition: Regular expressions
          </span>
      </section>

      <section>
        <b>Can we do this using regular expressions, plus a ton of conditional statements?</b>
        <span class="caption">
            Second intuition: A lot of conditionals!
          </span>
      </section>

      <section>
        <ol>
          <b style="background-color:yellow">Sort of!</b>
          <li>The approach is:
            <ul>
              <li>We can't assume any delimiter is correctly parsed, so first we just tokenize everything we can</li>
              <ul>
              <li class="fragment"><b style="color:#e15718">Bush Anna, widow of Henry J. r. 152 W. 13th</b>

                <li class="fragment"><b>=> ["<b style="color:#e15718">Bush</b>", "<b style="color:#e15718">Anna</b>", "<b style="color:#e15718">,</b>", "<b style="color:#e15718">widow</b>", "<b style="color:#e15718">of</b>", "<b style="color:#e15718">Henry</b>", "<b style="color:#e15718">J</b>", "<b style="color:#e15718">.</b>", "<b style="color:#e15718">r</b>", "<b style="color:#e15718">.</b>", "<b style="color:#e15718">152</b>", "<b style="color:#e15718">W</b>", "<b style="color:#e15718">.</b>", "<b style="color:#e15718">13th</b>"]</b>
                </ul>
            </ul>
          </li>
        </ol>
        <span class="caption">
            Second intuition: A lot of conditionals!
          </span>
      </section>

      <section>
        <ul>
          <li>Then, we go through the tokens one by one, and try to figure out what label they belong to
            <li>We can use heuristic methods for classifying each token
            <ul style="font-size:75%">
              <li>Does it contain a number? If so, it's probably part of an <b>address</b>.
              <li>Does it contain a known street name? If so, it's again part of an <b>address</b>.
                <li>Is it a known occupation? If so, it must be an <b>occupation</b> name.
              <li>...</li>
            </ul>
          </li>
        </ul>
        <span class="caption">
            Second intuition: A lot of conditionals!
          </span>
      </section>

      <section>
        <ul>
          <li>This turns out to be a <em>somewhat</em> promising approach, but it is very tedious to engineer...
            <li>Our accuracy is contingent on both:
              <ol>
                <li>Thinking of all of the relevant heuristic methods
                  <li>Interpreting and weighing the results of those heuristics correctly
                  </ol>
        </ul>
        <span class="caption">
            Second intuition: A lot of conditionals!
          </span>
      </section>

      <section>
        <b>Can algorithms from machine learning do this better?</b>
        <span class="caption">
            Third intuition: Conditional random fields (CRF)
          </span>
      </section>

      <section>
        <ol>
          <b style="background-color:#1baf1b">YES! 100% YES!</b>
          <li>We use a supervised-learning algorithm called "conditional random fields" (CRF)
            <ul>
              <li>Instead of trying to pre-empt what factors are important in labeling, and interpreting the results, we demonstrate by way of example and let CRF infer what is important
              <ul>
          </li>
        </ol>
        <span class="caption">
            Third intuition: Conditional random fields (CRF)
          </span>
      </section>

      <section>
        <ul>
          <li>First we create training examples, at the same individual-token level as before:
        </ul>
        <img class="stretch" src="../city-directory-meetup/images/training-ex-2.png" />
        <ul>
          <li>Each token is labeled in terms of what tag it is part of
        </ul>

        <span class="caption">
            Third intuition: Conditional random fields (CRF)
          </span>
      </section>

      <section>
        <ul>
          <li>Next, we define <b>features</b>, similar to the heuristic functions we used earlier
            <li>Features are usually boolean (true/false) attributes that are computed for each token
              <ul><li>In CRF, features describe not only the "present" token, but can also look at adjacent tokens</ul>
        </ul>
        <span class="caption">
            Third intuition: Conditional random fields (CRF)
          </span>
      </section>

      <section>
        <ul>
          <li>Assume that the input we are trying to classify is:
            <ul>
              <li><b style="color:#e15718">Bush Chauncey, commissioner, 157 B'way, h. Rathbun's hotel</b>
              </ul>
        </ul>
        <span class="caption">
            Third intuition: Conditional random fields (CRF)
          </span>
      </section>

      <section>
        <ul>
              <li>First we'll go through the input, one token at a time, and featurize those tokens
        </ul>
        <span class="caption">
            Third intuition: Conditional random fields (CRF)
          </span>
      </section>

      <section>
        <ul>
              <li><b style="color:#e15718"><b style="background-color:yellow">Bush</b> Chauncey, commissioner, 157 B'way, h. Rathbun's hotel</b>
                <ul style="font-size:75%">
                  <li>current_word-is_start_of_sentence: <b style="color:green">TRUE</b>
                  <li>current_word-is_end_of_sentence: <b style="color:red">FALSE</b>
                  <li>current_word-contains_a_number: <b style="color:red">FALSE</b>
                  <li>current_word-character_capitalized: <b style="color:green">TRUE</b>
                    <li>...
                      <li>next_word-is_start_of_sentence: <b style="color:red">FALSE</b>
                        <li>...
                          <li>previous_word-is_start_of_sentence: <b style="color:purple">NULL</b>
                            <li>...
                  </ul>

        </ul>
        <span class="caption">
            Third intuition: Conditional random fields (CRF)
          </span>
      </section>

      <section>
        <ul>
              <li><b style="color:#e15718">Bush <b style="background-color:yellow">Chauncey</b>, commissioner, 157 B'way, h. Rathbun's hotel</b>
                <ul style="font-size:75%">
                  <li>current_word-is_start_of_sentence: <b style="color:red">FALSE</b>
                  <li>current_word-is_end_of_sentence: <b style="color:red">FALSE</b>
                  <li>current_word-contains_a_number: <b style="color:red">FALSE</b>
                  <li>current_word-character_capitalized: <b style="color:green">TRUE</b>
                    <li>...
                      <li>next_word-is_start_of_sentence: <b style="color:red">FALSE</b>
                        <li>...
                          <li>previous_word-is_start_of_sentence: <b style="color:green">TRUE</b>
                            <li>...
                  </ul>

        </ul>
        <span class="caption">
            Third intuition: Conditional random fields (CRF)
          </span>
      </section>

      <section>
        <ul>
          <li>Features can represent many different aspects of the input
            <ul>
              <li>Word shape
                <li>Suffixes and prefixes
                  <li>Types of characters in the input
                    <li>Whether or not the input is a known entity
              </ul>
        </ul>
        <span class="caption">
            CRF: Feature engineering
          </span>
      </section>

      <section>
        <ul>
          <li>Conditional random fields learns which sets of feature maximize the ability to correctly predict the label
            <ul>
              <li>We train a CRF model to provide the sequence of labels that maximizes: <br><b style="font-size:75%;background-color:#ff8787">P( word-label | word-features) * P(label-sequence)</b>
              </ul>
              <li>The training data is our correctly-labeled input examples; this is what we want the model to learn from
        </ul>
        <span class="caption">
            CRF: learning
          </span>
      </section>

      <section>
        <ul>
          <li>We used Python's <b>scikit-learn</b> package
            <ul>
              <li>They recently added a CRF implementation
                <li>The API is in Python, so it's easy to write your own feature-extractors
              </ul>
        </ul>
        <span class="caption">
            CRF: implementation
          </span>
      </section>

      <section>
        <ul>
          <li><b>What does CRF allow us to do?</b>
            <ul>
              <li>We just have to create features that are sensitive to differences of tokens
                <ul><li>But, we don't actually have to determine if those differences are useful or not!</ul>
                <li>CRF infers from training examples, by perceiving in terms of featurized-tokens, what the most important factors in predicting labels are
              </ul>
        </ul>
        <span class="caption">
            CRF: implementation
          </span>
      </section>

      <section>
        <ul>
          <li><b>How good is CRF?</b>
            <ul>
              <li>Super good. Really really good.
                <ul><li>But we don't really have good stats to back that claim up.</ul>
                  <li>Since the majority of our input is unlabeled, it's hard to evaluate against it.

              </ul>
        </ul>
        <span class="caption">
            CRF: accuracy
          </span>
      </section>


      <!-- End SGB slides. -->


      <!-- For example slides, see https://github.com/bertspaan/nacis-2017/blob/master/index.html -->

    </div>
  </div>
  <div id="caption-container">
    <div id="caption">
    </div>
  </div>
  <script src="js/head.load.min.js"></script>
  <script src="js/reveal.js"></script>
  <script src="js/script.js"></script>
</body>

</html>
